<!DOCTYPE html>
<html lang="es" sec:authorize="hasAnyRole('ROLE_2', 'ROLE_4')" xmlns:th="http://www.thymeleaf.org"
	xmlns:sec="http://www.thymeleaf.org/extras/spring-security">

<head>
	<meta charset="UTF-8">
	<title>Listado</title>
	<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/5.3.2/css/bootstrap.min.css"
		th:href="@{/webjars/bootstrap/css/bootstrap.min.css}">
	<link rel="stylesheet" href="../static/css/estilo.css" th:href="@{/css/estilo.css}">
	<link rel="stylesheet" href="../static/css/menu.css" th:href="@{/css/menu.css}">
	<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.7.1/jquery.min.js"
		th:src="@{/webjars/jquery/jquery.min.js}"></script>
	<script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>
	<script th:src="@{/script/script.js}"></script>
	<script src="https://maxcdn.bootstrapcdn.com/bootstrap/5.3.2/js/bootstrap.min.js"
		th:src="@{/webjars/bootstrap/js/bootstrap.min.js}"></script>
	  <link rel="stylesheet" href="../static/css/blog.css" th:href="@{/css/blog.css}">
	  <link rel="stylesheet" href="../static/css/blog.rtl.css" th:href="@{/css/blog.rtl.css}">
</head>

<body>
	<header class="blog-header py-3 px-3">
		    <div class="row flex-nowrap justify-content-between align-items-center">
		      <div class="col-4 pt-1">
		      </div>
		      <div class="col-4 text-center">
		        <a class="blog-header-logo text-dark" style="text-decoration: underline;">Panel Administrativo</a>
		      </div>
			      <div class="col-4 d-flex justify-content-end align-items-center">
			        <a class="btn btn-sm btn-outline-secondary" style="margin-right: 5%;" th:href="@{/privada/index}">Volver</a>
			        <form th:action="@{/auth/logout}" method="post" id="logoutForm">
						<button type="button" class="btn btn-sm btn-outline-secondary" style="margin-left:10%;" onclick="confirmarLogout()">Salir</button>
					</form>
			      </div>
		    </div>
	  </header>
	<div class="container py-4 mt-5">
		<div style="text-align: center;">
			<h3>Imagina y Crea</h3>
		</div>
			
		<div style="display: flex; justify-content: center;">
		<div class="card bg-light" style="justify-content: center; text-align: center; width: 50%;">
			<div class="card-header" style="justify-content: center; display: flex;">
				
				<div class="contenedor form-registro">
	         	
	         		<form class="formEspecial" th:action="@{/guardarNoticia}" method="post" enctype="multipart/form-data" th:object="${noticiaDTO}">
					    <input type="hidden" id="idNoticia" name="idNoticia" th:value="*{idNoticia}">
					    
					    <input type="text" id="tituloNoticia" name="tituloNoticia" class="input" placeholder="Título de la Noticia"
					        required th:value="*{tituloNoticia}">
					    
					    <textarea id="descNoticia" name="descNoticia" class="input" placeholder="Descripción de la Noticia"
					        required th:text="*{descNoticia}"></textarea>
					    
					     <div style="justify-content: center; display: flex;">
					    <!-- Nuevo campo de selección para CategoriaDTO -->
					    <select id="categoria" name="idCategoria" class="input form-field d-flex text-center align-items-center" required>
					        <option th:each="categoria : ${categoriasDTO}" th:value="${categoria.idCategoria}"
					            th:selected="${noticiaDTO.idCategoria == categoria.idCategoria}">
					            <!-- Supongo que CategoriaDTO tiene un campo 'tipoCategoria' -->
					            <span th:text="${categoria.tipoCategoria}"></span>
					        </option>
					    </select>
					     </div>
					     <input type="file" id="foto" name="file" accept="image/*">

					    <button type="submit" id="btnGuardarNoticia" class="form-btn">Guardar Noticia</button>
					    <div class="mensajeContrasenya" id="mensajeContrasenya"></div>
					</form>

    </div>
			</div>
		</div>
		</div>
	</div>
</body>

</html>